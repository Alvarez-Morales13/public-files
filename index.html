<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Galaxia para ti</title>
  <style>
    html, body { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; }
    #galaxy-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
    .pill { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); padding: 10px 20px; 
           background: rgba(20, 10, 30, 0.7); border: 1px solid rgba(255,255,255,0.4); 
           color: white; border-radius: 30px; z-index: 100; font-family: sans-serif; text-align: center; }
    .player { position: fixed; bottom: 20px; left: 20px; z-index: 100; color: white; font-family: sans-serif;
              background: rgba(0,0,0,0.5); padding: 10px; border-radius: 10px; border: 1px solid #333; }
  </style>
  <!-- Cargamos Three.js desde una fuente muy estable -->
  <script src="https://unpkg.com"></script>
  <script src="https://unpkg.com"></script>
</head>
<body>

<div class="pill">Te Amo Infinitamente Mi Princesa Hermosa ðŸ’œ<br><small>(Toca para iniciar mÃºsica)</small></div>

<div class="player">
  <div style="font-size:12px; margin-bottom:5px;">Margaret - Lana Del Rey ðŸ’™ðŸŒ¹</div>
  <div id="yt-player"></div>
</div>

<canvas id="galaxy-canvas"></canvas>

<script>
// --- AUDIO YOUTUBE ---
var tag = document.createElement('script');
tag.src = "https://www.youtube.com";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

let player;
window.onYouTubeIframeAPIReady = function() {
  player = new YT.Player('yt-player', {
    height: '40', width: '200', videoId: 'qJ6AtTioUTo',
    playerVars: { 'autoplay': 1, 'controls': 1, 'loop': 1, 'playlist': 'qJ6AtTioUTo' },
    events: { 'onReady': (e) => { document.body.onclick = () => e.target.playVideo(); } }
  });
};

// --- MOTOR DE GALAXIA ---
function init() {
    const canvas = document.getElementById('galaxy-canvas');
    const renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, powerPreference: "high-performance" });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000005); // Azul profundo para ver que cargÃ³

    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
    camera.position.set(0, 40, 140);

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    // Estrellas
    const geometry = new THREE.BufferGeometry();
    const vertices = [];
    for (let i = 0; i < 10000; i++) {
        vertices.push(THREE.MathUtils.randFloatSpread(1000), THREE.MathUtils.randFloatSpread(1000), THREE.MathUtils.randFloatSpread(1000));
    }
    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
    const material = new THREE.PointsMaterial({ color: 0xffffff, size: 1.2, transparent: true, opacity: 0.8 });
    const points = new THREE.Points(geometry, material);
    scene.add(points);

    // Frases como Sprites
    const frases = ["Pinchecha ðŸ‘‘", "Hermosa âœ¨", "Te Amo ðŸ’œ", "Nathy ðŸŒ¹", "Mi Todo â™¾ï¸"];
    frases.forEach(texto => {
        const can = document.createElement('canvas');
        const ctx = can.getContext('2d');
        can.width = 512; can.height = 128;
        ctx.font = 'bold 44px Arial';
        ctx.fillStyle = 'white';
        ctx.textAlign = 'center';
        ctx.fillText(texto, 256, 64);
        const tex = new THREE.CanvasTexture(can);
        const mat = new THREE.SpriteMaterial({ map: tex });
        const sprite = new THREE.Sprite(mat);
        sprite.position.set(Math.random()*150-75, Math.random()*150-75, Math.random()*150-75);
        sprite.scale.set(40, 10, 1);
        scene.add(sprite);
    });

    function animate() {
        requestAnimationFrame(animate);
        points.rotation.y += 0.0005;
        controls.update();
        renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
}

// Ejecutar cuando todo cargue
window.onload = init;
</script>
</body>
</html>
